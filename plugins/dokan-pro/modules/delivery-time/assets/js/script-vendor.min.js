(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,r){if(t){if("string"==typeof t)return e(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?e(t,r):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var r,a;r=jQuery,a={init:function(){r("#vendor-delivery-time-date-picker").on("change",a.set_delivery_time_date_picker)},init_dashboard_calendar:function(){if("undefined"!=typeof FullCalendar){for(var e="",t=FullCalendar.globalLocales.length,n=0;n<t;n++){if(0!==dokan_helper.week_starts_day&&(FullCalendar.globalLocales[n].week.dow=dokan_helper.week_starts_day),FullCalendar.globalLocales[n].code===dokan_full_calendar_i18n.code){e=dokan_full_calendar_i18n.code;break}if(FullCalendar.globalLocales[n].code===dokan_full_calendar_i18n.code_1){e=dokan_full_calendar_i18n.code_1;break}}var d=document.getElementById("delivery-time-calendar");new FullCalendar.Calendar(d,{locale:e,defaultView:"dayGridMonth",defaultDate:new Date,headerToolbar:{start:"dayGridMonth,timeGridWeek,timeGridDay,listWeek",center:"title",end:"today prev,next"},events:function(e,t,r){var n={action:"dokan_get_dashboard_calendar_event",start_date:moment(e.start).format("YYYY-MM-DD"),end_date:moment(e.end).format("YYYY-MM-DD"),nonce:dokan_delivery_time_calendar_nonce},d=a.get_filter_query_param("delivery_type_filter");d&&(n.type_filter=d),jQuery.post(dokan.ajaxurl,n,(function(e){e.success&&e.data.calendar_events&&t(Array.prototype.slice.call(e.data.calendar_events))}))},eventDidMount:function(e){r(e.el).tooltip({title:e.event.extendedProps.info.body,placement:"top",trigger:"hover",container:"body",animation:!0,html:!0})}}).render()}},set_delivery_time_date_picker:function(){var e=r("#vendor-delivery-time-date-picker"),t=e.data("vendor_id"),n=e.data("nonce"),d=e.attr("value");d?r("#vendor-delivery-time-date-picker").fadeIn(400):r("#vendor-delivery-time-date-picker").fadeOut(400);var o={action:"dokan_get_delivery_time_slot",vendor_id:t,nonce:n,date:d};o.date&&a.get_delivery_time_slots(o)},set_order_details_delivery_calendar_config:function(){if("undefined"!=typeof vendorInfo){var e=vendorInfo,r={minDate:"today",altInput:!0,altFormat:dokan_get_i18n_date_format(!1),dateFormat:"Y-m-d",disable:[]},a=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],n=Object.keys(e.vendor_delivery_options.delivery_day),d=[];a.forEach((function(e){n.includes(e)||d.push(a.indexOf(e))}));var o=e.vendor_vacation_days,i=e.vendor_preorder_blocked_dates;r.disable=[function(e){return d.includes(e.getDay())}],r.disable=[].concat(t(r.disable),t(o),t(i)),flatpickr("#vendor-delivery-time-date-picker",r)}},get_delivery_time_slots:function(e){r("#vendor-delivery-time-slot-picker").prop("disabled",!0),jQuery.post(dokan.ajaxurl,e,(function(e){e.success&&(r("#vendor-delivery-time-slot-picker option:gt(0)").remove(),r.each(e.data.vendor_delivery_slots,(function(e,t){r("#vendor-delivery-time-slot-picker").append(r("<option></option>").attr("value",e).text(e))})),r("#vendor-delivery-time-slot-picker").prop("disabled",!1))}))},get_filter_query_param:function(e){var t=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.search);return null!==t&&(t[1]||0)}},jQuery(document).ready((function(e){a.init(),a.set_order_details_delivery_calendar_config(),a.init_dashboard_calendar()}))})();