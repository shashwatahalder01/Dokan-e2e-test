(()=>{"use strict";function t(t,e,o,a,r,s,n,i){var u,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=o,l._compiled=!0),a&&(l.functional=!0),s&&(l._scopeId="data-v-"+s),n?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},l._ssrRegister=u):r&&(u=i?function(){r.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:r),u)if(l.functional){l._injectStyles=u;var d=l.render;l.render=function(t,e){return u.call(e),d(t,e)}}else{var c=l.beforeCreate;l.beforeCreate=c?[].concat(c,u):[u]}return{exports:t,options:l}}const e=t({name:"Tabs"},(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("h2",{staticClass:"nav-tab-wrapper woo-nav-tab-wrapper"},[o("router-link",{class:["nav-tab",{"nav-tab-active":"/dokan-request-quote"===t.$route.path}],attrs:{to:{name:"RequestAQuote"}}},[t._v("\n        "+t._s(t.__("Quotes List","dokan"))+"\n    ")]),t._v(" "),o("router-link",{class:["nav-tab",{"nav-tab-active":"/dokan-quote-rules"===t.$route.path}],attrs:{to:{name:"RequestAQuoteRules"}}},[t._v("\n        "+t._s(t.__("Quote Rules","dokan"))+"\n    ")])],1)}),[],!1,null,null,null).exports;var o=dokan_get_lib("ListTable"),a="dokan-request-quote";const r={name:"RequestAQuote",components:{Tabs:e,ListTable:o},data:function(){return{requests:[],loading:!1,status:{publish:this.__("Published","dokan"),pending:this.__("Pending","dokan"),approved:this.__("Approved","dokan"),draft:this.__("Draft","dokan"),future:this.__("Scheduled","dokan"),converted:this.__("Converted","dokan"),trash:this.__("Trash","dokan")},counts:{all:0,publish:0,approve:0,draft:0,future:0,pending:0,converted:0,trash:0},notFound:this.__("No quote found.","dokan"),totalPages:1,perPage:10,totalItems:0,showCb:!0,columns:{sl:{label:this.__("Quote #","dokan")},title:{label:this.__("Quote Title","dokan")},customer_email:{label:this.__("Customer Email","dokan")},status:{label:this.__("Quote Status","dokan")},created_at:{label:this.__("Date","dokan")}},actionColumn:"sl",actions:[{key:"edit",label:this.__("Edit","dokan")},{key:"trash",label:this.__("Trash","dokan")},{key:"delete",label:this.__("Delete Permanently","dokan")},{key:"restore",label:this.__("Restore","dokan")}]}},watch:{"$route.query.status":function(){this.fetchAll()},"$route.query.page":function(){this.fetchAll()}},computed:{currentStatus:function(){return this.$route.query.status||"all"},currentPage:function(){var t=this.$route.query.page||1;return parseInt(t)},bulkActions:function(){return"trash"===this.$route.query.status?[{key:"delete",label:this.__("Delete Permanently","dokan")},{key:"restore",label:this.__("Restore","dokan")}]:[{key:"trash",label:this.__("Move to Trash","dokan")}]},checkLangRtlHelp:function(){return 1===isRtl&&void 0!==isRtl?"help-block-rtl":"help-block-ltr"}},methods:{updatedCounts:function(t){this.counts.all=parseInt(t.getResponseHeader("X-Status-All")),this.counts.publish=parseInt(t.getResponseHeader("X-Status-Publish")),this.counts.draft=parseInt(t.getResponseHeader("X-Status-Draft")),this.counts.pending=parseInt(t.getResponseHeader("X-Status-Pending")),this.counts.future=parseInt(t.getResponseHeader("X-Status-Future")),this.counts.converted=parseInt(t.getResponseHeader("X-Status-Converted")),this.counts.approve=parseInt(t.getResponseHeader("X-Status-Approved")),this.counts.trash=parseInt(t.getResponseHeader("X-Status-Trash"))},updatePagination:function(t){this.totalPages=parseInt(t.getResponseHeader("X-WP-TotalPages")),this.totalItems=parseInt(t.getResponseHeader("X-WP-Total"))},fetchAll:function(){var t=this;this.loading=!0;var e={per_page:this.perPage,page:this.currentPage,status:this.currentStatus};dokan.api.get("/"+a,e).done((function(e,o,a){t.requests=e,t.loading=!1,t.updatedCounts(a),t.updatePagination(a)}))},moment:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return moment(t)})),editUrl:function(t){return dokan.urls.adminRoot+"admin.php?page=dokan#/"+a+"/"+t+"/edit"},goToPage:function(t){this.$router.push({name:"RequestAQuote",query:{status:this.currentStatus,page:t}})},rowAction:function(t,e){var o=this;if(e.row.id){if("trash"===t||"delete"===t){this.loading=!0;var r="delete"===t?"?force=true":"";dokan.api.delete("/"+a+"/"+e.row.id+r).done((function(t,e,a){o.fetchAll(),o.loading=!1})).error((function(t,e,a){o.loadSpinner=!1,alert(t.responseJSON.message)}))}"restore"===t&&(this.loading=!0,dokan.api.put("/"+a+"/"+e.row.id+"/restore").done((function(t,e,a){o.fetchAll(),o.loading=!1})).error((function(t,e,a){o.loadSpinner=!1,alert(t.responseJSON.message)})))}else alert(this.__("No data found","dokan"))},onBulkAction:function(t,e){var o=this;if("trash"===t){this.loading=!0;var r={};r.trash=e,dokan.api.put("/"+a+"/batch",r).done((function(t,e,a){o.fetchAll(),o.loading=!1})).error((function(t,e,a){o.loadSpinner=!1,alert(t.responseJSON.message)}))}if("delete"===t){this.loading=!0;var s={};s.delete=e,dokan.api.put("/"+a+"/batch",s).done((function(t,e,a){o.fetchAll(),o.loading=!1})).error((function(t,e,a){o.loadSpinner=!1,alert(t.responseJSON.message)}))}if("restore"===t){this.loading=!0;var n={};n.restore=e,dokan.api.put("/"+a+"/batch",n).done((function(t,e,a){o.fetchAll(),o.loading=!1})).error((function(t,e,a){o.loadSpinner=!1,alert(t.responseJSON.message)}))}}},created:function(){this.fetchAll()}};const s=t(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"dokan-quote-wrapper"},[o("tabs"),t._v(" "),o("br"),t._v(" "),o("h1",{staticClass:"wp-heading-inline"},[t._v(t._s(t.__("Quotes","dokan")))]),t._v(" "),o("router-link",{staticClass:"page-title-action",attrs:{to:{name:"NewRequestQuote"}}},[t._v(t._s(t.__("New Quote","dokan")))]),t._v(" "),o("hr",{staticClass:"wp-header-end"}),t._v(" "),o("ul",{staticClass:"subsubsub"},[o("li",[o("router-link",{attrs:{to:{name:"RequestAQuote"},"active-class":"current",exact:""}},[t._v(t._s(t.__("All","dokan"))+" "),o("span",{staticClass:"count"},[t._v(t._s(t.counts.all))])]),t._v(" | ")],1),t._v(" "),o("li",[o("router-link",{attrs:{to:{name:"RequestAQuote",query:{status:"pending"}},"active-class":"current",exact:""}},[t._v(t._s(t.__("Pending","dokan"))+" "),o("span",{staticClass:"count"},[t._v(t._s(t.counts.pending))])]),t._v(" | ")],1),t._v(" "),o("li",[o("router-link",{attrs:{to:{name:"RequestAQuote",query:{status:"draft"}},"active-class":"current",exact:""}},[t._v(t._s(t.__("Draft","dokan"))+" "),o("span",{staticClass:"count"},[t._v(t._s(t.counts.draft))])]),t._v(" | ")],1),t._v(" "),o("li",[o("router-link",{attrs:{to:{name:"RequestAQuote",query:{status:"converted"}},"active-class":"current",exact:""}},[t._v(t._s(t.__("Converted","dokan"))+" "),o("span",{staticClass:"count"},[t._v(t._s(t.counts.converted))])]),t._v(" | ")],1),t._v(" "),o("li",[o("router-link",{attrs:{to:{name:"RequestAQuote",query:{status:"approve"}},"active-class":"current",exact:""}},[t._v(t._s(t.__("Approved","dokan"))+" "),o("span",{staticClass:"count"},[t._v(t._s(t.counts.approve))])]),t._v(" | ")],1),t._v(" "),o("li",[o("router-link",{attrs:{to:{name:"RequestAQuote",query:{status:"trash"}},"active-class":"current",exact:""}},[t._v(t._s(t.__("Trash","dokan"))+" "),o("span",{staticClass:"count"},[t._v(t._s(t.counts.trash))])])],1)]),t._v(" "),o("list-table",{attrs:{columns:t.columns,rows:t.requests,loading:t.loading,"action-column":t.actionColumn,actions:t.actions,"show-cb":t.showCb,"bulk-actions":t.bulkActions,"not-found":t.notFound,"total-pages":t.totalPages,"total-items":t.totalItems,"per-page":t.perPage,"current-page":t.currentPage,text:t.$root.listTableTexts()},on:{pagination:t.goToPage,"bulk:click":t.onBulkAction},scopedSlots:t._u([{key:"sl",fn:function(e){return["trash"===e.row.status?o("strong",[t._v(t._s(t.__("Quote","dokan")+" "+e.row.id))]):o("strong",[o("a",{attrs:{href:t.editUrl(e.row.id)}},[t._v(t._s(t.__("Quote","dokan")+" "+e.row.id))])])]}},{key:"title",fn:function(e){return[o("strong",[t._v(t._s(e.row.title))])]}},{key:"status",fn:function(e){return[o("span",{class:e.row.status},[t._v(t._s(t.status[e.row.status]))])]}},{key:"created_at",fn:function(e){return[t._v("\n            "+t._s(e.row.created_at)+"\n        ")]}},{key:"row-actions",fn:function(e){return[t._l(t.actions,(function(a,r){return"converted"!==e.row.status?["edit"===a.key?o("span",{class:a.key},[o("a",{attrs:{href:t.editUrl(e.row.id)}},[t._v(t._s(a.label))]),t._v(" "),r!==t.actions.length-1?[t._v(" | ")]:t._e()],2):t._e(),t._v(" "),"trash"===a.key&&"trash"!==t.currentStatus?o("span",{class:a.key},[o("a",{attrs:{href:"#"},on:{click:function(o){return o.preventDefault(),t.rowAction(a.key,e)}}},[t._v(t._s(a.label))])]):t._e(),t._v(" "),"delete"===a.key&&"trash"===t.currentStatus?o("span",{class:a.key},[o("a",{attrs:{href:"#"},on:{click:function(o){return o.preventDefault(),t.rowAction(a.key,e)}}},[t._v(t._s(a.label))]),t._v(" "),r!==t.actions.length-1?[t._v(" | ")]:t._e()],2):t._e(),t._v(" "),"restore"===a.key&&"trash"===t.currentStatus?o("span",{class:a.key},[o("a",{attrs:{href:"#"},on:{click:function(o){return o.preventDefault(),t.rowAction(a.key,e)}}},[t._v(t._s(a.label))]),t._v(" "),r!==t.actions.length-1?[t._v(" | ")]:t._e()],2):t._e()]:t._e()}))]}}])})],1)}),[],!1,null,null,null).exports;var n=dokan_get_lib("ListTable"),i=dokan_get_lib("moment");const u=t({name:"RequestAQuoteRules",components:{ListTable:n,Tabs:e},data:function(){return{requests:[],loading:!1,status:{publish:this.__("Published","dokan"),draft:this.__("Draft","dokan"),trash:this.__("Trash","dokan")},counts:{all:0,publish:0,draft:0,trash:0},notFound:this.__("No quote found.","dokan"),totalPages:1,perPage:10,totalItems:0,showCb:!0,columns:{rule_name:{label:this.__("Title #","dokan")},selected_user_role:{label:this.__("User Roles","dokan")},hide_price:{label:this.__("Hide Price","dokan")},button_text:{label:this.__("Button Text","dokan")},rule_priority:{label:this.__("Rule Priority","dokan")},status:{label:this.__("Rule Status","dokan")},created_at:{label:this.__("Date","dokan")}},actionColumn:"rule_name",actions:[{key:"edit",label:this.__("Edit","dokan")},{key:"trash",label:this.__("Trash","dokan")},{key:"delete",label:this.__("Delete Permanently","dokan")},{key:"restore",label:this.__("Restore","dokan")}]}},watch:{"$route.query.status":function(){this.fetchAll()},"$route.query.page":function(){this.fetchAll()}},computed:{currentStatus:function(){return this.$route.query.status||"all"},currentPage:function(){var t=this.$route.query.page||1;return parseInt(t)},bulkActions:function(){return"trash"===this.$route.query.status?[{key:"delete",label:this.__("Delete Permanently","dokan")},{key:"restore",label:this.__("Restore","dokan")}]:[{key:"trash",label:this.__("Move to Trash","dokan")}]},checkLangRtlHelp:function(){return 1===isRtl&&void 0!==isRtl?"help-block-rtl":"help-block-ltr"}},methods:{updatedCounts:function(t){this.counts.all=parseInt(t.getResponseHeader("X-Status-All")),this.counts.publish=parseInt(t.getResponseHeader("X-Status-Publish")),this.counts.draft=parseInt(t.getResponseHeader("X-Status-Draft")),this.counts.trash=parseInt(t.getResponseHeader("X-Status-Trash"))},updatePagination:function(t){this.totalPages=parseInt(t.getResponseHeader("X-WP-TotalPages")),this.totalItems=parseInt(t.getResponseHeader("X-WP-Total"))},fetchAll:function(){var t=this;this.loading=!0;var e={per_page:this.perPage,page:this.currentPage,status:this.currentStatus};dokan.api.get("/dokan-quote-rule",e).done((function(e,o,a){t.requests=e,t.loading=!1,t.updatedCounts(a),t.updatePagination(a)}))},moment:function(t){return i(t)},editUrl:function(t){return dokan.urls.adminRoot+"admin.php?page=dokan#/"+"dokan-quote-rule/"+t+"/edit"},goToPage:function(t){this.$router.push({name:"RequestAQuoteRules",query:{status:this.currentStatus,page:t}})},rowAction:function(t,e){var o=this;if(e.row.id){if("trash"===t||"delete"===t){this.loading=!0;var a="delete"===t?"?force=true":"";dokan.api.delete("/dokan-quote-rule/"+e.row.id+a).done((function(t,e,a){o.fetchAll(),o.loading=!1})).error((function(t,e,a){o.loadSpinner=!1,alert(t.responseJSON.message)}))}if("restore"===t){this.loading=!0;dokan.api.put("/dokan-quote-rule/"+e.row.id+"/restore").done((function(t,e,a){o.fetchAll(),o.loading=!1})).error((function(t,e,a){o.loadSpinner=!1,alert(t.responseJSON.message)}))}}else alert(this.__("No data found","dokan"))},onBulkAction:function(t,e){var o=this;if("trash"===t){this.loading=!0;var a={};a.trash=e,dokan.api.put("/dokan-quote-rule/batch",a).done((function(t,e,a){o.fetchAll(),o.loading=!1})).error((function(t,e,a){o.loadSpinner=!1,alert(t.responseJSON.message)}))}if("delete"===t){this.loading=!0;var r={};r.delete=e,dokan.api.put("/dokan-quote-rule/batch",r).done((function(t,e,a){o.fetchAll(),o.loading=!1})).error((function(t,e,a){o.loadSpinner=!1,alert(t.responseJSON.message)}))}if("restore"===t){this.loading=!0;var s={};s.restore=e,dokan.api.put("/dokan-quote-rule/batch",s).done((function(t,e,a){o.fetchAll(),o.loading=!1})).error((function(t,e,a){o.loadSpinner=!1,alert(t.responseJSON.message)}))}}},created:function(){this.fetchAll()}},(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"dokan-announcement-wrapper"},[o("tabs"),t._v(" "),o("br"),t._v(" "),o("h1",{staticClass:"wp-heading-inline"},[t._v(t._s(t.__("Quote Rules","dokan")))]),t._v(" "),o("router-link",{staticClass:"page-title-action",attrs:{to:{name:"NewQuoteRules"}}},[t._v(t._s(t.__("New Quote Rules","dokan")))]),t._v(" "),o("hr",{staticClass:"wp-header-end"}),t._v(" "),o("ul",{staticClass:"subsubsub"},[o("li",[o("router-link",{attrs:{to:{name:"RequestAQuoteRules"},"active-class":"current",exact:""}},[t._v(t._s(t.__("All","dokan"))+" "),o("span",{staticClass:"count"},[t._v(t._s(t.counts.all))])]),t._v(" | ")],1),t._v(" "),o("li",[o("router-link",{attrs:{to:{name:"RequestAQuoteRules",query:{status:"publish"}},"active-class":"current",exact:""}},[t._v(t._s(t.__("Published","dokan"))+" "),o("span",{staticClass:"count"},[t._v(t._s(t.counts.publish))])]),t._v(" | ")],1),t._v(" "),o("li",[o("router-link",{attrs:{to:{name:"RequestAQuoteRules",query:{status:"draft"}},"active-class":"current",exact:""}},[t._v(t._s(t.__("Draft","dokan"))+" "),o("span",{staticClass:"count"},[t._v(t._s(t.counts.draft))])]),t._v(" | ")],1),t._v(" "),o("li",[o("router-link",{attrs:{to:{name:"RequestAQuoteRules",query:{status:"trash"}},"active-class":"current",exact:""}},[t._v(t._s(t.__("Trash","dokan"))+" "),o("span",{staticClass:"count"},[t._v(t._s(t.counts.trash))])])],1)]),t._v(" "),o("list-table",{attrs:{columns:t.columns,rows:t.requests,loading:t.loading,"action-column":t.actionColumn,actions:t.actions,"show-cb":t.showCb,"bulk-actions":t.bulkActions,"not-found":t.notFound,"total-pages":t.totalPages,"total-items":t.totalItems,"per-page":t.perPage,"current-page":t.currentPage,text:t.$root.listTableTexts()},on:{pagination:t.goToPage,"bulk:click":t.onBulkAction},scopedSlots:t._u([{key:"rule_name",fn:function(e){return["trash"===e.row.status?o("strong",[t._v(t._s(e.row.rule_name))]):o("strong",[o("a",{attrs:{href:t.editUrl(e.row.id)}},[t._v(t._s(e.row.rule_name))])])]}},{key:"status",fn:function(e){return[o("span",{class:e.row.status},[t._v(t._s(t.status[e.row.status]))])]}},{key:"created_at",fn:function(e){return[t._v("\n            "+t._s(e.row.created_at)+"\n        ")]}},{key:"row-actions",fn:function(e){return[t._l(t.actions,(function(a,r){return["edit"===a.key?o("span",{class:a.key},[o("a",{attrs:{href:t.editUrl(e.row.id)}},[t._v(t._s(a.label))]),t._v(" "),r!==t.actions.length-1?[t._v(" | ")]:t._e()],2):t._e(),t._v(" "),"trash"===a.key&&"trash"!==t.currentStatus?o("span",{class:a.key},[o("a",{attrs:{href:"#"},on:{click:function(o){return o.preventDefault(),t.rowAction(a.key,e)}}},[t._v(t._s(a.label))])]):t._e(),t._v(" "),"delete"===a.key&&"trash"===t.currentStatus?o("span",{class:a.key},[o("a",{attrs:{href:"#"},on:{click:function(o){return o.preventDefault(),t.rowAction(a.key,e)}}},[t._v(t._s(a.label))]),t._v(" "),r!==t.actions.length-1?[t._v(" | ")]:t._e()],2):t._e(),t._v(" "),"restore"===a.key&&"trash"===t.currentStatus?o("span",{class:a.key},[o("a",{attrs:{href:"#"},on:{click:function(o){return o.preventDefault(),t.rowAction(a.key,e)}}},[t._v(t._s(a.label))]),t._v(" "),r!==t.actions.length-1?[t._v(" | ")]:t._e()],2):t._e()]}))]}}])})],1)}),[],!1,null,null,null).exports;function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,a=new Array(e);o<e;o++)a[o]=t[o];return a}function d(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?l(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var c=dokan_get_lib("TextEditor"),p=dokan_get_lib("Modal"),h=dokan_get_lib("Postbox"),f=dokan_get_lib("Multiselect"),v=dokan_get_lib("debounce"),m=Swal.mixin({customClass:{confirmButton:"button button-primary",cancelButton:"button button-secondary"},buttonsStyling:!1});const g=t({name:"NewRequestQuote",components:{Tabs:e,Postbox:h,TextEditor:c,Modal:p,Multiselect:f,Debounce:v},data:function(){return{quoteId:"",loading:!1,showModal:!1,createStatus:"pending",showProductTable:!1,requested_table_products:[],responcedProduct:[],requested_products:[],customers:[],pageTitle:this.__("Add New Quote","dokan"),quote:{quote_title:"",status:"pending",customer_info:{name_field:"",email_field:"",company_field:"",phone_field:""},user_id:"",product_ids:[],offer_price:[],offer_product_quantity:[]},product_quantity:1,product_id:"",columns:{thumbnail:{label:this.__("Thumbnail","dokan")},item:{label:this.__("Item","dokan")},cost:{label:this.__("Cost","dokan")},off_price:{label:this.__("Off. Price","dokan")},qty:{label:this.__("Qty","dokan")},off_subtotal:{label:this.__("Off. Subtotal","dokan")}},loadSpinner:!1,errorMessage:[],productErrorMessage:[],isLoading:!1,draftBtnLabel:this.__("Save as Draft","dokan"),publishBtnLabel:this.__("Publish","dokan"),addProductBtnLabel:this.__("Add product(s)","dokan"),addOrderBtnLabel:this.__("Convert to Order","dokan"),addProductToQuoteBtnLabel:this.__("Add to quote","dokan")}},computed:{total:function(){var t=this,e=0;return this.quote.offer_price.forEach((function(o,a){0<o&&(e+=parseFloat(o)*parseFloat(t.quote.offer_product_quantity[a]))})),e},submitBtnLabel:function(){return this.statusesLabel[this.quote.status]},checkRtl:function(){return 1===isRtl&&void 0!==isRtl?"lang_rtl":""},checkLangRtlHelp:function(){return 1===isRtl&&void 0!==isRtl?"help-block-rtl":"help-block-ltr"}},methods:{formatMoney:function(t){return accounting.formatMoney(t,dokan.currency)},hideModal:function(){this.showModal=!1},openModal:function(){this.product_id="",this.product_quantity=1,this.showModal=!0},searchProducts:v((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this;t.length<1||(this.isLoading=!0,dokan.api.get("/products",{search:t,request_a_quote:1}).done((function(t){e.responcedProduct=t,e.requested_products=t.map((function(t){return{product_id:t.id,product_title:t.name}}))})).always((function(){e.isLoading=!1})).fail((function(t){e.requested_products=[{product_id:0,product_title:e.__("No product found","dokan")}];var o=dokan_handle_ajax_error(t);o&&e.showAlert(o,"","error")})))}),300),addProductToQuote:function(){var t=this.product_id.product_id,e=this.product_quantity,o=d(this.requested_table_products),a=d(this.quote.product_ids),r=d(this.quote.offer_price),s=d(this.quote.offer_product_quantity);_.map(this.responcedProduct,(function(n,i){if(n.id===t&&n.price>=1&&e>=1)return a.push(n.id),r.push(n.price),s.push(e),o.push(n)})),this.requested_table_products=o,this.quote.product_ids=a,this.quote.offer_price=r,this.quote.offer_product_quantity=s,this.showProductTable=!0,this.hideModal()},removeFromQuote:function(t){this.requested_table_products.splice(t,1),this.quote.product_ids.splice(t,1),this.quote.offer_price.splice(t,1),this.quote.offer_product_quantity.splice(t,1),this.requested_table_products.length<=0&&(this.showProductTable=!1,this.quote.offer_price=[],this.quote.offer_product_quantity=[])},asyncCustomerFind:function(t){var e=this;this.isLoading=!0,t.length>1&&dokan.api.get("/customers?search="+t).done((function(t){e.isLoading=!1;var o=e.quote.customer_info;e.customers=_.map(t,(function(t){return o={name_field:t.username,email_field:t.email},{id:t.id,name:t.username+"( "+t.email+" )"}})),e.quote.customer_info=o}))},filterUndefined:function(t){return t.filter((function(t){return void 0!==t}))},clearAll:function(){this.quote.user_id=""},createRequestAQuote:function(t){this.$route.params.id?this.updateRequestAQuote(t):this.saveQuoteRequest(t)},saveQuoteRequest:function(t){var e=this;this.loadSpinner=!0;var o=jQuery.extend({},this.quote);if(o.offer_price=this.filterUndefined(d(o.offer_price)),o.offer_product_quantity=this.filterUndefined(d(o.offer_product_quantity)),o.user_id=this.quote.user_id.id,o.status=t,!this.validateFormFields(o))return this.loadSpinner=!1,!1;dokan.api.post("/dokan-request-quote",o).done((function(t){e.loadSpinner=!1,e.sendToPages()})).error((function(t){e.loadSpinner=!1,alert(t.responseJSON.message)}))},updateRequestAQuote:function(t){var e=this,o=this.$route.params.id;this.loadSpinner=!0;var a=jQuery.extend({},this.quote);if(a.product_ids=this.filterUndefined(d(a.product_ids)),a.offer_price=this.filterUndefined(d(a.offer_price)),a.offer_product_quantity=this.filterUndefined(d(a.offer_product_quantity)),Array.isArray(this.quote.user_id)?a.user_id=this.quote.user_id[0].id:a.user_id=this.quote.user_id.id,a.status=t,a.id=o,!this.validateFormFields(a))return this.loadSpinner=!1,!1;dokan.api.put("/dokan-request-quote/"+o,a).done((function(t){e.loadSpinner=!1,e.sendToPages()})).error((function(t){e.loadSpinner=!1,alert(t.responseJSON.message)}))},validateFormFields:function(t){var e=!0;if(this.errorMessage=[],this.productErrorMessage=[],""===t.quote_title&&(this.errorMessage.push(this.__("Quote Title is required.","dokan")),e=!1),""!==t.user_id&&void 0!==t.user_id||(this.errorMessage.push(this.__("Customer is required.","dokan")),e=!1),t.product_ids.length<=0)this.productErrorMessage.push(this.__("Please select at least one product.","dokan")),e=!1;else for(var o=0;o<t.product_ids.length;o++)""!==t.product_ids[o]&&void 0!==t.product_ids[o]||(this.productErrorMessage.push(this.__("Please select at least one product.","dokan")),e=!1);if(t.offer_price.length<=0)this.productErrorMessage.push(this.__("Please select at least one price.","dokan")),e=!1;else for(var a=0;a<t.offer_price.length;a++)""!==t.offer_price[a]&&0!=t.offer_price[a]||(this.productErrorMessage.push(this.__("Offer price can't be zero.","dokan")),e=!1);if(t.offer_product_quantity.length<=0)this.productErrorMessage.push(this.__("Please add at least one offer product quantity.","dokan")),e=!1;else for(var r=0;r<t.offer_product_quantity.length;r++)""!==t.offer_product_quantity[r]&&0!=t.offer_product_quantity[r]||(this.productErrorMessage.push(this.__("Offer product quantity can't be zero.","dokan")),e=!1);return e},sendToPages:function(){this.$router.push({name:"RequestAQuote"})},fetchAQuote:function(t){var e=this;this.loading=!0,dokan.api.get("/dokan-request-quote/"+t).done((function(t){e.quote.quote_title=t.title,e.quote.status=t.status,0!=t.customer_info&&(e.quote.customer_info=t.customer_info?t.customer_info:{},e.customers=[{id:t.customer.user_id,name:t.customer.user_login+"( "+t.customer.user_email+" )"}],e.quote.user_id=e.customers),e.requested_table_products=t.products;var o=[],a=[],r=[];_.map(t.products,(function(t,e){o.push(t.id),a[e]=t.offer_price,r[e]=t.offer_product_quantity})),e.pageTitle=e.__("Edit Quote","dokan"),e.quote.product_ids=o,e.quote.offer_price=a,e.quote.offer_product_quantity=r,e.loading=!1,e.showProductTable=!0}))},convertToOrder:function(t){var e=this,o={};o.quote_id=t,o.status="converted",dokan.api.post("/dokan-request-quote/convert-to-order",o).done((function(t){e.loadSpinner=!1,e.sendToPages()})).fail((function(t){e.loadSpinner=!1,alert(t.responseJSON.message)}))},showAlert:function(t,e,o){m.fire(t,e,o)}},created:function(){this.$route.params.id&&(this.quoteId=this.$route.params.id,this.fetchAQuote(this.$route.params.id))}},(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"dokan-announcement-form-wrapper"},[o("tabs"),t._v(" "),o("h1",{staticClass:"wp-heading-inline"},[t._v(t._s(t.pageTitle))]),t._v(" "),o("a",{staticClass:"page-title-action",on:{click:function(e){return t.$router.go(-1)}}},[t._v(t._s(t.__("Go Back","dokan")))]),t._v(" "),o("hr",{staticClass:"wp-header-end"}),t._v(" "),o("form",{attrs:{action:"",method:"post",id:"post"}},[o("div",{attrs:{id:"poststuff"}},[o("div",{staticClass:"metabox-holder columns-2",attrs:{id:"post-body"}},[o("div",{staticClass:"post-body-content",class:t.checkRtl},[o("div",{attrs:{id:"titlediv"}},[o("div",{attrs:{id:"titlewrap"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.quote.quote_title,expression:"quote.quote_title"}],attrs:{type:"text",name:"post_title",size:"30",id:"title",autocomplete:"off",placeholder:t.__("Enter quote title","dokan"),required:"required"},domProps:{value:t.quote.quote_title},on:{input:function(e){e.target.composing||t.$set(t.quote,"quote_title",e.target.value)}}})]),t._v(" "),o("div",{staticClass:"inside"})]),t._v(" "),o("div",{staticClass:"postarea wp-editor-expand",attrs:{id:"postdivrich"}},[o("postbox",{attrs:{title:t.__("Customer Information","dokan"),extraClass:"request-quote-settings"}},[t._l(t.errorMessage,(function(e){return t.errorMessage.length>0?o("ul",{staticClass:"error-message"},[o("li",[t._v(t._s(e))])]):t._e()})),t._v(" "),o("table",{staticClass:"form-table announcement-meta-options"},[o("tbody",[o("tr",[o("th",[t._v(t._s(t.__("Quote user","dokan")))]),t._v(" "),o("td",[o("multiselect",{attrs:{autocomplete:"off",id:"ajax",label:"name","track-by":"id",placeholder:t.__("Type to search","dokan"),"open-direction":"bottom",options:t.customers,"clear-on-select":!0,"close-on-select":!0,searchable:!0,"hide-selected":!0},on:{"search-change":t.asyncCustomerFind},model:{value:t.quote.user_id,callback:function(e){t.$set(t.quote,"user_id",e)},expression:"quote.user_id"}})],1)]),t._v(" "),o("tr",[o("th",[t._v("\n                                        "+t._s(t.__("Full Name","dokan"))+"\n                                    ")]),t._v(" "),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.quote.customer_info.name_field,expression:"quote.customer_info.name_field"}],staticStyle:{"border-left":"2px solid rgb(202, 16, 16)"},attrs:{type:"text",size:"50",placeholder:t.__("Full Name","dokan"),name:"name_field",required:"required"},domProps:{value:t.quote.customer_info.name_field},on:{input:function(e){e.target.composing||t.$set(t.quote.customer_info,"name_field",e.target.value)}}})])]),t._v(" "),o("tr",[o("th",[t._v("\n                                        "+t._s(t.__("Email","dokan"))+"\n                                    ")]),t._v(" "),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.quote.customer_info.email_field,expression:"quote.customer_info.email_field"}],staticStyle:{"border-left":"2px solid rgb(202, 16, 16)"},attrs:{type:"email",size:"50",placeholder:t.__("Email","dokan"),name:"email_field",required:"required"},domProps:{value:t.quote.customer_info.email_field},on:{input:function(e){e.target.composing||t.$set(t.quote.customer_info,"email_field",e.target.value)}}})])]),t._v(" "),o("tr",[o("th",[t._v("\n                                        "+t._s(t.__("Company Name","dokan"))+"\n                                    ")]),t._v(" "),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.quote.customer_info.company_field,expression:"quote.customer_info.company_field"}],attrs:{type:"text",size:"50",placeholder:t.__("Company Name","dokan"),name:"company_field"},domProps:{value:t.quote.customer_info.company_field},on:{input:function(e){e.target.composing||t.$set(t.quote.customer_info,"company_field",e.target.value)}}})])]),t._v(" "),o("tr",[o("th",[t._v("\n                                        "+t._s(t.__("Phone Number","dokan"))+"\n                                    ")]),t._v(" "),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.quote.customer_info.phone_field,expression:"quote.customer_info.phone_field"}],attrs:{type:"text",size:"50",placeholder:t.__("Phone Number","dokan"),name:"phone_field"},domProps:{value:t.quote.customer_info.phone_field},on:{input:function(e){e.target.composing||t.$set(t.quote.customer_info,"phone_field",e.target.value)}}})])])])])],2)],1)]),t._v(" "),o("div",{staticClass:"postbox-container",attrs:{id:"postbox-container-1"}},[o("postbox",{attrs:{title:t.__("Publish","dokan"),extraClass:"announcement-actions"}},["converted"!==t.quote.status?o("div",[o("div",{staticClass:"action"},[o("input",{staticClass:"button button-default draft-btn",attrs:{type:"submit",disabled:t.loadSpinner},domProps:{value:t.draftBtnLabel},on:{click:function(e){return e.preventDefault(),t.createRequestAQuote("draft")}}}),t._v(" "),t.loadSpinner?o("span",{staticClass:"spinner"}):t._e(),t._v(" "),o("input",{staticClass:"button button-primary publish-btn",attrs:{type:"submit",disabled:t.loadSpinner},domProps:{value:t.publishBtnLabel},on:{click:function(e){return e.preventDefault(),t.createRequestAQuote(t.createStatus)}}}),t._v(" "),o("div",{staticClass:"clear"})])]):t._e(),t._v(" "),"converted"===t.quote.status?o("h2",[t._v(t._s(t.__("This quote is already converted into order.","dokan")))]):t._e()])],1),t._v(" "),o("div",{staticClass:"postbox-container",attrs:{id:"postbox-container-2"}},[o("postbox",{attrs:{title:t.__("Quote Details","dokan"),extraClass:"request-quote-settings"}},[t.productErrorMessage.length>0?o("div",t._l(t.productErrorMessage,(function(e){return o("ul",{staticClass:"error-message"},[o("li",[t._v(t._s(e))])])})),0):t._e(),t._v(" "),t.showProductTable?o("table",{staticClass:"form-table dokan-quote-product"},[o("thead",[o("tr",[t._l(t.columns,(function(e){return o("th",[t._v(t._s(e.label))])})),t._v(" "),o("th")],2)]),t._v(" "),o("tbody",t._l(t.requested_table_products,(function(e,a){return o("tr",[o("td",[o("img",{staticClass:"attachment-thumbnail size-thumbnail",attrs:{width:"50",src:e.images[0].src,alt:e.name,loading:"lazy",title:e.name}})]),t._v(" "),o("td",[o("div",[o("a",{attrs:{href:e.permalink,target:"_blank"}},[t._v(t._s(e.name)+" ")])]),t._v(" "),o("div",[t._v("\n                                        "+t._s(t.__("Vendor: ","dokan"))+"\n                                    ")]),t._v(" "),o("div",[t._v("\n                                        "+t._s(e.store.name)+"\n                                    ")])]),t._v(" "),o("td",[t._v("\n                                    "+t._s(t.formatMoney(e.price))+"\n                                ")]),t._v(" "),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.quote.offer_price[a],expression:"quote.offer_price[index]"}],staticStyle:{width:"5em",float:"right","min-height":"40px","margin-right":"30px"},attrs:{type:"text",name:"offer_price",id:"offer_price",autocomplete:"off"},domProps:{value:t.quote.offer_price[a]},on:{input:function(e){e.target.composing||t.$set(t.quote.offer_price,a,e.target.value)}}})]),t._v(" "),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.quote.offer_product_quantity[a],expression:"quote.offer_product_quantity[index]"}],staticStyle:{width:"5em",float:"right","min-height":"40px","margin-right":"30px"},attrs:{type:"number",name:"offer_product_quantity",min:"1",id:"offer_product_quantity",autocomplete:"off"},domProps:{value:t.quote.offer_product_quantity[a]},on:{input:function(e){e.target.composing||t.$set(t.quote.offer_product_quantity,a,e.target.value)}}})]),t._v(" "),o("td",[t._v("\n                                    "+t._s(t.formatMoney(t.quote.offer_price[a]*t.quote.offer_product_quantity[a]))+"\n                                ")]),t._v(" "),o("td",[o("a",{on:{click:function(e){return t.removeFromQuote(a)}}},[o("span",{staticClass:"dashicons dashicons-no",staticStyle:{color:"red",cursor:"pointer"}})])])])})),0),t._v(" "),o("tfoot",[o("tr",[o("td",{staticStyle:{"text-align":"right"},attrs:{colspan:"5"}},[t._v("\n                                    "+t._s(t.__("Subtotal (Standard)","dokan"))+"\n                                ")]),t._v(" "),o("td",{staticStyle:{"text-align":"left"},attrs:{colspan:"2"}},[t._v("\n                                    "+t._s(t.formatMoney(t.total))+"\n                                ")])])])]):t._e(),t._v(" "),o("footer",["converted"!==t.quote.status?o("input",{staticClass:"button button-default draft-btn",attrs:{type:"button",value:t.addProductBtnLabel,disabled:t.loadSpinner},on:{click:function(e){return e.preventDefault(),t.openModal()}}}):t._e(),t._v(" "),"converted"!==t.quote.status&&""!==t.quoteId?o("input",{staticClass:"button button-primary publish-btn",staticStyle:{float:"right"},attrs:{type:"button",value:t.addOrderBtnLabel,disabled:t.loadSpinner},on:{click:function(e){return e.preventDefault(),t.convertToOrder(t.quoteId)}}}):t._e()])])],1)]),t._v(" "),o("br",{staticClass:"clear"})])]),t._v(" "),t.showModal?o("modal",{attrs:{title:t.__("Add Product(s)","dokan"),footer:!0},on:{close:t.hideModal}},[o("template",{slot:"body"},[o("multiselect",{staticStyle:{width:"75%",float:"left"},attrs:{autocomplete:"off",id:"ajax",label:"product_title","track-by":"id",placeholder:t.__("Type to search","dokan"),"open-direction":"bottom",options:t.requested_products,"clear-on-select":!0,"close-on-select":!0,searchable:!0,"hide-selected":!0},on:{"search-change":t.searchProducts},model:{value:t.product_id,callback:function(e){t.product_id=e},expression:"product_id"}}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.product_quantity,expression:"product_quantity"}],staticStyle:{width:"5em",float:"right","min-height":"40px","margin-right":"30px"},attrs:{type:"number",name:"quantity",size:"10",min:"1",id:"quantity",autocomplete:"off"},domProps:{value:t.product_quantity},on:{input:function(e){e.target.composing||(t.product_quantity=e.target.value)}}})],1),t._v(" "),o("template",{slot:"footer"},[o("input",{staticClass:"button button-primary publish-btn",attrs:{type:"button",value:t.addProductToQuoteBtnLabel,disabled:t.loadSpinner},on:{click:function(e){return e.preventDefault(),t.addProductToQuote()}}})])],2):t._e()],1)}),[],!1,null,null,null).exports;const k=t({props:["id","label","nodes","depth","hasChildren","savedCategories"],data:function(){return{showChildren:!!this.$route.params.id}},name:"categoryList",computed:{indent:function(){return{transform:"translate(".concat(15*this.depth,"px)")}}},methods:{toggleChildren:function(){this.showChildren=!this.showChildren},checkCategory:function(t){this.$emit("clickedCategory",t)}}},(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ul",{staticClass:"categoryList"},[o("li",{staticClass:"subCategory",style:t.indent},[o("input",{staticClass:"parent",attrs:{type:"checkbox"},domProps:{checked:t.savedCategories.includes(t.id)},on:{click:function(e){return t.checkCategory(t.id)}}}),t._v(" "),o("span",{on:{click:t.toggleChildren}},[t._v("\n            "+t._s(t.label)+" "),t.hasChildren?o("span",[t._v("["+t._s(t.showChildren?"-":"+")+"]")]):t._e()])]),t._v(" "),t._l(t.nodes,(function(e,a){return t.showChildren?o("categoryList",{key:e.id,attrs:{nodes:e.children,label:e.name,id:e.id,savedCategories:t.savedCategories,hasChildren:e.hasChildren,depth:t.depth+1},on:{clickedCategory:t.checkCategory}}):t._e()}))],2)}),[],!1,null,null,null).exports;var b=dokan_get_lib("Postbox"),y=dokan_get_lib("Multiselect"),q=dokan_get_lib("debounce"),C=Swal.mixin({customClass:{confirmButton:"button button-primary",cancelButton:"button button-secondary"},buttonsStyling:!1});const w=t({name:"NewQuoteRules",components:{Tabs:e,categoryList:k,Postbox:b,Multiselect:y,Debounce:q},data:function(){return{loading:!1,showProductsDropdown:!0,createStatus:"publish",isOpen:"",allRoles:[],requested_products:[],requestedCategories:[],rule:{rule_name:"",product_ids:[],category_ids:[],hide_price:1,hide_price_text:this.__("Price is hidden","dokan"),button_text:this.__("Add to quote","dokan"),rule_priority:0,hide_cart_button:"replace",rule_contents:[],selected_user_role:[],apply_on_all_product:0},pageTitle:this.__("Add New Rules","dokan"),loadSpinner:!1,draftBtnLabel:this.__("Save as Draft","dokan"),publishBtnLabel:this.__("Publish","dokan"),ruleErrorMessage:[]}},computed:{checkRtl:function(){return 1===isRtl&&void 0!==isRtl?"lang_rtl":""}},methods:{toggle:function(t){this.isOpen=this.isOpen!==t?t:""},checkedItem:function(t,e){return e.includes(t)},fetchRoles:function(){var t=this;this.loading=!0,dokan.api.get("/roles").done((function(e){t.allRoles=e.role_names,t.allRoles.dokan_wholesale_customer="Wholesale customer",t.allRoles.guest="Guest",t.loading=!1}))},limitText:function(t){return this.__("and ".concat(t," other products"),"dokan")},searchProducts:q((function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=this;e.length<1||dokan.api.get("/products",{search:e,request_a_quote:1}).done((function(e){t.requested_products=e.map((function(t){return{id:t.id,name:t.name}}))})).fail((function(t){o.filter.stores=[{id:0,name:o.__("No product found","dokan")}];var e=dokan_handle_ajax_error(t);e&&o.showAlert(e,"","error")}))}),300),searchCategory:function(){var t=this;dokan.api.get("/products/multistep-categories").done((function(e){var o=t;Object.values(e).forEach((function(t){if(0==t.parent_id){var a={id:Number(t.term_id),name:t.name,hasChildren:!1};t.children.length>0&&(a.hasChildren=!0,a.children=o.getChildCategories(e,t.children)),o.requestedCategories.push(a)}}))}))},getChildCategories:function(t,e){var o=[],a=this;return e.forEach((function(e){var r={id:Number(t[e].term_id),name:t[e].name,hasChildren:!1};t[e].children.length>0&&(r.hasChildren=!0,r.children=a.getChildCategories(t,t[e].children)),o.push(r)})),o},createQuoteRules:function(t){this.$route.params.id?this.updateQuoteRule(t,this.$route.params.id):this.saveQuoteRules(t)},getFilteredJsonData:function(t){var e=jQuery.extend({},this.rule);return e.status=t,e.product_ids=!e.apply_on_all_product&&Array.isArray(e.product_ids)?e.product_ids.map((function(t){return t.id})):[],e.category_ids=!e.apply_on_all_product&&Array.isArray(e.category_ids)?e.category_ids.map((function(t){return t})):[],e},validateFormFields:function(t){var e=!0;return this.ruleErrorMessage=[],""!==t.rule_name&&void 0!==t.rule_name||(this.ruleErrorMessage.push(this.__("Please enter rule name.","dokan")),e=!1),t.selected_user_role.length<=0&&(this.ruleErrorMessage.push(this.__("Please select at least one user role.","dokan")),e=!1),""!==t.hide_price_text&&void 0!==t.hide_price_text||(this.ruleErrorMessage.push(this.__("Please enter hide price text.","dokan")),e=!1),""!==t.button_text&&void 0!==t.button_text||(this.ruleErrorMessage.push(this.__("Please enter button text.","dokan")),e=!1),e},saveQuoteRules:function(t){var e=this;this.loadSpinner=!0;var o=this.getFilteredJsonData(t);if(!this.validateFormFields(o))return this.loadSpinner=!1,!1;dokan.api.post("/dokan-quote-rule",o).done((function(t){e.loadSpinner=!1,e.sendToPages()})).fail((function(t){e.loadSpinner=!1;var o=dokan_handle_ajax_error(t);o&&self.showAlert(o,"","error")}))},updateQuoteRule:function(t,e){var o=this;this.loadSpinner=!0;var a=this.getFilteredJsonData(t);if(a.id=e,!this.validateFormFields(a))return this.loadSpinner=!1,!1;dokan.api.put("/dokan-quote-rule/"+e,a).done((function(t){o.loadSpinner=!1,o.sendToPages()})).fail((function(t){o.loadSpinner=!1;var e=dokan_handle_ajax_error(t);e&&self.showAlert(e,"","error")}))},sendToPages:function(){this.$router.push({name:"RequestAQuoteRules"})},checkCategory:function(t){var e=this.rule.category_ids.indexOf(t);e>=0?this.rule.category_ids.splice(e,1):(this.rule.category_ids.push(t),Array.isArray(t)&&(this.rule.category_ids=t))},fetchAQuoteRule:function(t){var e=this;this.loading=!0,dokan.api.get("/dokan-quote-rule/"+t).done((function(t){e.rule=t,e.rule.apply_on_all_product=parseInt(t.apply_on_all_product),e.rule.apply_on_all_product&&(e.showProductsDropdown=!1),e.pageTitle=e.__("Edit Rule","dokan"),e.loading=!1})).fail((function(t){e.loadSpinner=!1;var o=dokan_handle_ajax_error(t);o&&self.showAlert(o,"","error")}))},showAlert:function(t,e,o){C.fire(t,e,o)}},created:function(){this.$route.params.id&&this.fetchAQuoteRule(this.$route.params.id),this.fetchRoles(),this.searchCategory()}},(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"dokan-quote-form-wrapper"},[o("tabs"),t._v(" "),o("h1",{staticClass:"wp-heading-inline"},[t._v(t._s(t.pageTitle))]),t._v(" "),o("a",{staticClass:"page-title-action",on:{click:function(e){return t.$router.go(-1)}}},[t._v(t._s(t.__("Go Back","dokan")))]),t._v(" "),o("hr",{staticClass:"wp-header-end"}),t._v(" "),o("form",{attrs:{action:"",method:"post",id:"post"}},[o("div",{attrs:{id:"poststuff"}},[o("div",{staticClass:"metabox-holder columns-2",attrs:{id:"post-body"}},[o("div",{staticClass:"post-body-content",class:t.checkRtl},[o("div",{attrs:{id:"titlediv"}},[o("div",{attrs:{id:"titlewrap"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.rule.rule_name,expression:"rule.rule_name"}],attrs:{type:"text",name:"rule_name",size:"30",id:"title",autocomplete:"off",placeholder:t.__("Enter rule title","dokan"),required:"required"},domProps:{value:t.rule.rule_name},on:{input:function(e){e.target.composing||t.$set(t.rule,"rule_name",e.target.value)}}})]),t._v(" "),o("div",{staticClass:"inside"})]),t._v(" "),o("div",{staticClass:"postarea wp-editor-expand",attrs:{id:"postdivrich"}},[o("postbox",{attrs:{title:t.__("Rule settings","dokan"),extraClass:"request-rule-settings"}},[t.ruleErrorMessage.length>0?o("div",t._l(t.ruleErrorMessage,(function(e,a){return o("ul",{key:a,staticClass:"error-message"},[o("li",[t._v(t._s(e))])])})),0):t._e(),t._v(" "),o("table",{staticClass:"form-table"},[o("tr",[o("th",{staticClass:"cat_text"},[o("label",[o("strong",[t._v(t._s(t.__("Apply quote for","dokan")))])])]),t._v(" "),o("td",[o("ul",{staticClass:"all_cats"},t._l(t.allRoles,(function(e,a){return o("li",{key:a,staticClass:"per_cat"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.rule.selected_user_role,expression:"rule.selected_user_role"}],staticClass:"parent",attrs:{id:a,type:"checkbox"},domProps:{value:a,checked:Array.isArray(t.rule.selected_user_role)?t._i(t.rule.selected_user_role,a)>-1:t.rule.selected_user_role},on:{change:function(e){var o=t.rule.selected_user_role,r=e.target,s=!!r.checked;if(Array.isArray(o)){var n=a,i=t._i(o,n);r.checked?i<0&&t.$set(t.rule,"selected_user_role",o.concat([n])):i>-1&&t.$set(t.rule,"selected_user_role",o.slice(0,i).concat(o.slice(i+1)))}else t.$set(t.rule,"selected_user_role",s)}}}),t._v(" "),o("label",{attrs:{for:a}},[t._v(t._s(e))])])})),0)])]),t._v(" "),o("tr",[o("th",[t._v(t._s(t.__("Apply on All Products","dokan")))]),t._v(" "),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.rule.apply_on_all_product,expression:"rule.apply_on_all_product"}],staticClass:"parent",attrs:{type:"checkbox",id:"apply_on_all_product",name:"apply_on_all_product"},domProps:{checked:Array.isArray(t.rule.apply_on_all_product)?t._i(t.rule.apply_on_all_product,null)>-1:t.rule.apply_on_all_product},on:{click:function(e){t.showProductsDropdown=!t.showProductsDropdown},change:function(e){var o=t.rule.apply_on_all_product,a=e.target,r=!!a.checked;if(Array.isArray(o)){var s=t._i(o,null);a.checked?s<0&&t.$set(t.rule,"apply_on_all_product",o.concat([null])):s>-1&&t.$set(t.rule,"apply_on_all_product",o.slice(0,s).concat(o.slice(s+1)))}else t.$set(t.rule,"apply_on_all_product",r)}}}),t._v(" "),o("label",{attrs:{for:"apply_on_all_product"}},[t._v("\n                                            "+t._s(t.__("Check this if you want to apply this rule on all products.","dokan"))+"\n                                        ")])])]),t._v(" "),o("tr",{directives:[{name:"show",rawName:"v-show",value:t.showProductsDropdown,expression:"showProductsDropdown"}]},[o("th",[t._v(t._s(t.__("Select Products","dokan")))]),t._v(" "),o("td",[o("multiselect",{attrs:{id:"ajax",label:"name","track-by":"id",placeholder:t.__("Type to search","dokan"),"open-direction":"bottom",options:t.requested_products,multiple:!0,searchable:!0,"internal-search":!1,"clear-on-select":!0,"close-on-select":!1,"options-limit":300,limit:10,"limit-text":t.limitText,"max-height":700,"show-no-results":!1,"hide-selected":!0},on:{"search-change":t.searchProducts},model:{value:t.rule.product_ids,callback:function(e){t.$set(t.rule,"product_ids",e)},expression:"rule.product_ids"}},[o("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v(t._s(t.__("Oops! No elements found. Consider changing the search query.","dokan")))])])],1)]),t._v(" "),o("tr",{directives:[{name:"show",rawName:"v-show",value:t.showProductsDropdown,expression:"showProductsDropdown"}]},[o("th",{staticClass:"cat_text"},[o("label",[o("strong",[t._v(t._s(t.__("Select Categories","dokan")))])])]),t._v(" "),o("td",[o("div",{staticClass:"all_cats"},t._l(t.requestedCategories,(function(e,a){return o("categoryList",{key:e.id,attrs:{label:e.name,nodes:e.children,hasChildren:e.hasChildren,id:e.id,savedCategories:t.rule.category_ids,depth:0},on:{clickedCategory:t.checkCategory}})})),1)])]),t._v(" "),o("tr",[o("th",[t._v(t._s(t.__("Hide Price","dokan")))]),t._v(" "),o("td",[o("select",{directives:[{name:"model",rawName:"v-model",value:t.rule.hide_price,expression:"rule.hide_price"}],attrs:{name:"hide_price",id:"announcement_sender_type"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.rule,"hide_price",e.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"1"}},[t._v(t._s(t.__("Yes","dokan")))]),t._v(" "),o("option",{attrs:{value:"0"}},[t._v(t._s(t.__("No","dokan")))])])])]),t._v(" "),o("tr",[o("th",[t._v(t._s(t.__("Hide Price Text","dokan")))]),t._v(" "),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.rule.hide_price_text,expression:"rule.hide_price_text"}],attrs:{type:"text",size:"50",autocomplete:"off"},domProps:{value:t.rule.hide_price_text},on:{input:function(e){e.target.composing||t.$set(t.rule,"hide_price_text",e.target.value)}}})])]),t._v(" "),o("tr",[o("th",[t._v(t._s(t.__("Hide Add to Cart Button","dokan")))]),t._v(" "),o("td",[o("select",{directives:[{name:"model",rawName:"v-model",value:t.rule.hide_cart_button,expression:"rule.hide_cart_button"}],attrs:{name:"hide_cart_button"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.rule,"hide_cart_button",e.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"replace"}},[t._v(t._s(t.__("Replace Add to Cart button with a Quote Button","dokan")))]),t._v(" "),o("option",{attrs:{value:"keep_and_add_new"}},[t._v(t._s(t.__("Keep Add to Cart button and add a new Quote Button","dokan")))])])])]),t._v(" "),o("tr",[o("th",[t._v(t._s(t.__("Custom Button Label","dokan")))]),t._v(" "),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.rule.button_text,expression:"rule.button_text"}],attrs:{type:"text",name:"button_text",size:"30",autocomplete:"off",required:"required"},domProps:{value:t.rule.button_text},on:{input:function(e){e.target.composing||t.$set(t.rule,"button_text",e.target.value)}}}),t._v(" "),o("div",[t._v("\n                                            "+t._s(t.__('Display the above label on custom button, e.g "Request a Quote"',"dokan"))+"\n                                        ")])])])])])],1)]),t._v(" "),o("div",{staticClass:"postbox-container",attrs:{id:"postbox-container-1"}},[o("postbox",{attrs:{title:t.__("Publish","dokan"),extraClass:"quote-actions"}},[o("div",{staticClass:"action"},[o("input",{staticClass:"button button-default draft-btn",attrs:{type:"submit",disabled:t.loadSpinner},domProps:{value:t.draftBtnLabel},on:{click:function(e){return e.preventDefault(),t.createQuoteRules("draft")}}}),t._v(" "),t.loadSpinner?o("span",{staticClass:"spinner"}):t._e(),t._v(" "),o("input",{staticClass:"button button-primary publish-btn",attrs:{type:"submit",disabled:t.loadSpinner},domProps:{value:t.publishBtnLabel},on:{click:function(e){return e.preventDefault(),t.createQuoteRules(t.createStatus)}}}),t._v(" "),o("div",{staticClass:"clear"})])]),t._v(" "),o("postbox",{attrs:{title:t.__("Rule priority","dokan"),extraClass:"quote-actions"}},[o("div",{staticStyle:{"margin-bottom":"10px"}},[o("strong",[t._v(t._s(t.__("Order","dokan")))])]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.rule.rule_priority,expression:"rule.rule_priority"}],attrs:{type:"number",autocomplete:"off",required:"required"},domProps:{value:t.rule.rule_priority},on:{input:function(e){e.target.composing||t.$set(t.rule,"rule_priority",e.target.value)}}})])],1)]),t._v(" "),o("br",{staticClass:"clear"})])])],1)}),[],!1,null,null,null).exports;dokan_add_route(s),dokan_add_route(u),dokan_add_route(g),dokan_add_route(w)})();